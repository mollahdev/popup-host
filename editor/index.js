(()=>{"use strict";function t(){return Math.floor(1e6*Math.random())}class e{config={};css="";uid=t();constructor(t=!1){const e=this;this.registerControls.apply({addControl:function(n,o){o.selector&&(o.prefix=t?"#popup.element-1 ":`#popup .element-${e.uid} `,o.selector.call(o)&&(e.css+=o.prefix+o.selector.call(o)+"\n\n")),o.isLabelInline=o.isLabelInline||!1,e.config[n]=o}})}static select(t,e){return`<select value="${t.default}" data-key=${e} type="select" class="popup-control--trigger">\n                ${Object.keys(t.options).map((e=>`<option value="${e}">${t.options[e]}</option>`)).join("")}\n            </select>\n            `}static text(t,e){return`<input \n                value="${t.default}" \n                data-key=${e} \n                type="text" \n                class="popup-control--trigger"\n            />`}static color(t,e){return`<input \n                value="${t.default}" \n                data-key=${e} \n                type="color" \n                class="popup-control--trigger"\n            />`}static slider(t,e){return`<div class="slider-control">\n                <input\n                    class="popup-control--trigger"\n                    data-key=${e}\n                    type="range"\n                    min="0"  \n                    max=${t.max}  \n                    step=${t.step} \n                    value=${t.default}               \n                >\n                <span class="value">${t.default}px</span>\n            </div>\n            `}}const n={text_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:this.uid,sheet:"text_widget",icon:"popup-widgets",name:"Text Widget",render:this.render.bind(this.config)}}registerControls(){this.addControl("text_content",{label:"Text Color",type:"text",default:"All the text and elements in this popup should be editable and dragable",selector:function(){const t=jQuery(this.prefix);t.length&&t.find("span").text(this.default)}}),this.addControl("text_alignment",{label:"Text Alignment",type:"select",default:"center",options:{left:"Left",center:"Center",right:"Right"},selector:function(){return`span {\n                    display: inline-block;\n                    text-align: ${this.default};\n                }`}}),this.addControl("text_font_weight",{label:"Text Alignment",type:"select",default:400,options:{400:"Regular",700:"Medium",900:"Bold"},selector:function(){return`span {\n                    font-weight: ${this.default};\n                }`}}),this.addControl("text_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return`span {\n                    color: ${this.default};\n                }`}}),this.addControl("text_font_size",{label:"Text Font Size",type:"slider",default:24,max:100,step:1,selector:function(){return`span {\n                    font-size: ${this.default}px;\n                }`}}),this.addControl("text_line_height",{label:"Text Line Height",type:"slider",default:24,max:100,step:1,selector:function(){return`span {\n                    line-height: ${this.default}px;\n                }`}})}render(t=""){return`\n            <div class="popup-widget-element element-${t}" data-uid="${t}" id="text_widget" data-type="widget">\n                <i class="remove-btn">x</i>\n                <div>\n                    <span>${this.text_content.default}</span>\n                </div>\n            </div>\n        `}},star_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:t(),sheet:"star_widget",icon:"popup-widgets",name:"Star Widget",render:this.render.bind(this.config)}}registerControls(){this.addControl("star_color",{label:"Star Color",type:"color",default:"#c75943",isLabelInline:!0,selector:function(){return`span {\n                    color: ${this.default};\n                }`}}),this.addControl("star_size",{label:"Star Size",type:"slider",default:34,max:200,step:1,selector:function(){return`span {\n                    display: inline-block;\n                    font-size: ${this.default}px;\n                }`}})}render(t=""){return`\n            <div class="popup-widget-element element-${t}" data-uid="${t}" id="star_widget" data-type="widget">\n                <i class="remove-btn">x</i>\n                <div>\n                    <span class="popup-star"></span>\n                </div>\n            </div>\n        `}},field_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:t(),sheet:"field_widget",icon:"popup-widgets",name:"Field Widget"}}registerControls(){this.addControl("field_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}},button_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:t(),sheet:"button_widget",icon:"popup-widgets",name:"Button Widget",render:this.render.bind(this.config)}}registerControls(){this.addControl("button_content",{label:"Button Label",type:"text",default:"SIGNUP NOW",selector:function(){}}),this.addControl("button_padding_font_size",{label:"Font Size",type:"slider",default:20,max:100,step:1,selector:function(){return`.button{\n                    font-size: ${this.default}px\n                }`}}),this.addControl("button_padding_x",{label:"Padding X",type:"slider",default:20,max:200,step:1,selector:function(){return`.button{\n                    padding-left: ${this.default}px;\n                    padding-right: ${this.default}px;\n                }`}}),this.addControl("button_padding_y",{label:"Padding Y",type:"slider",default:20,max:200,step:1,selector:function(){return`.button{\n                    padding-top: ${this.default}px;\n                    padding-bottom: ${this.default}px;\n                }`}}),this.addControl("button_radius",{label:"Border Radius",type:"slider",default:20,max:200,step:1,selector:function(){return`.button{\n                    border-radius: ${this.default}px;\n                }`}}),this.addControl("button_color",{label:"Button Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return`.button {\n                    display: inline-block;\n                    color: ${this.default};\n                }`}}),this.addControl("button_color_hover",{label:"Button Hover Color",type:"color",default:"#414142",isLabelInline:!0,selector:function(){return`.button:hover {\n                    display: inline-block;\n                    color: ${this.default};\n                }`}}),this.addControl("button_bg_color",{label:"Background Color",type:"color",default:"#414142",isLabelInline:!0,selector:function(){return`.button {\n                    background: ${this.default};\n                }`}}),this.addControl("button_bg_color_hover",{label:"Background Hover Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return`.button:hover {\n                    background: ${this.default};\n                }`}})}render(t=""){return`\n            <div class="popup-widget-element element-${t}" data-uid="${t}" id="button_widget" data-type="widget">\n                <i class="remove-btn">x</i>\n                <div>\n                    <span class="button">${this.button_content.default}</span>\n                </div>\n            </div>\n        `}}};class o extends e{constructor(){return super(!0),{controls:this.config,css:this.css,uid:1,sheet:"popup-stylesheet"}}registerControls(){this.addControl("global_popup_bg",{label:"Popup Background Color",type:"color",default:"#e07a5f",isLabelInline:!0,selector:function(){return`.wrapper{\n                    background-color: ${this.default};\n                    box-shadow: 0px 0px 0 var(--border-width) ${this.default};\n                }`}}),this.addControl("global_popup_border_color",{label:"Popup Border Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return`.wrapper{\n                    border-color: ${this.default};\n                    border-style: solid;\n                }`}}),this.addControl("global_popup_border_width",{label:"Popup Border Width",type:"slider",default:5,max:50,step:1,selector:function(){return` .wrapper{\n                    border-width: ${this.default}px;\n                    --border-width: ${this.default}px;\n                }`}}),this.addControl("global_popup_radius",{label:"Popup Radius",type:"slider",default:500,max:500,step:10,selector:function(){return` .wrapper{\n                    border-radius: ${this.default}px\n                }`}}),this.addControl("global_popup_width",{label:"Popup Width",type:"slider",default:600,max:1e3,step:10,selector:function(){return` .wrapper{\n                    width: ${this.default}px\n                }`}}),this.addControl("global_popup_height",{label:"Popup Height",type:"slider",default:600,max:1e3,step:10,selector:function(){return` .wrapper{\n                    height: ${this.default}px\n                }`}})}}new class extends class{sidebarSettings={wheelSpeed:2,wheelPropagation:!0,minScrollbarLength:20};sidebarInit(){const t=new PerfectScrollbar(".customizer__sidebar--content",this.sidebarSettings);this.sidebarSettings.ps=t}createControlMarkup(t,n){const{controls:o}=t,l=Object.keys(o).map((t=>{const n=o[t],l=e[n.type];return l?`\n                <div class="control-item" data-inline="${n.isLabelInline}">\n                    <label> ${n.label} </label>\n                    <div class="control-item--field field-type-${n.type}">\n                        ${l(n,t)}\n                    </div>\n                </div>\n            `:""}));jQuery(".sidebar-container").html(`\n            <div class="control-container">\n                ${l.join("")}\n            </div>\n        `),jQuery(".popup-control--trigger").on("input",(function(e){e.preventDefault(),e.stopPropagation();const l=this.value,r=this.dataset.key;let i="";o[r].default=l,Object.values(o).forEach((t=>{t.selector&&t.selector.call(t)&&(i+=t.prefix+t.selector.call(t)+"\n\n")})),o[r].selector&&jQuery(`#${n}-${t.uid}`).text(i),"range"===this.type&&(this.nextElementSibling.innerText=l+"px")}))}createWidgetMarkup(){const t=Object.keys(n).map((t=>{const e=n[t];return`\n            <div class="popup-element">\n                <div class="popup-widget" draggable="true" data-type="${t}">\n                    <i class="${e.icon}"></i>\n                    <label>${e.name}</label>\n                </div>\n            </div>`}));jQuery(".sidebar-container").html(`\n            <div class="widget-container">\n                ${t.join("")}\n            </div>\n        `)}}{popupWrapper="";constructor(){super(),window.addEventListener("DOMContentLoaded",this.init.bind(this))}createControls(t){const e="global-settings"===t?this.globalControls:n[t];this.createControlMarkup(e,t)}createWidget(){this.createWidgetMarkup()}getStyles(){return new Promise(((t,e)=>{const n=jQuery(".popup-widget-element, #popup");let o="";n.each(((t,e)=>{const n=e.dataset.uid,l="1"==n?"#global-settings-1":`#${e.id}-${n}`,r=jQuery(l).text();o+=r})),t(o)}))}onSaveChanges(){const t=this,e=jQuery(".save-changes-btn");e.on("click",(function(){e.addClass("is-loading");const n=jQuery("#popup").parent().html();t.getStyles().then((t=>{const o={css:t,html:n,type:"content"};jQuery.ajax({type:"POST",data:o,url:window.location.href+"storage/index.php",success:function(t){e.removeClass("is-loading")}})}))}))}generateStyleSheet(t="global-settings-1",e=!0,n=""){e?jQuery("head").append(`<style id="${t}">`+this.globalControls.css+"</style>"):jQuery("head").append(`<style id="${t}">`+n+"</style>")}onDropWidget(e){const n=t(),o=e.controls;if(e.uid=n,e.render){const t=e.render(n);let l="";jQuery("#popup form > .wrapper").append(t),jQuery(".popup-widget-element").draggable({containment:"parent"}),Object.values(o).forEach((t=>{t.selector&&(t.prefix=`#popup .element-${n} `,t.selector.call(t)&&(l+=t.prefix+t.selector.call(t)+"\n\n"))})),this.generateStyleSheet(`${e.sheet}-${e.uid}`,!1,l)}}dropWidget(t){jQuery(".popup-widget").draggable({helper:"clone"}),jQuery("#popup form > .wrapper").droppable({accept:".popup-widget",drop:function(e,o){const l=o.draggable.data("type");t.onDropWidget(n[l])}})}removeWidget(t){jQuery(document).on("click",".remove-btn",(function(t){t.preventDefault(),t.stopPropagation();const e=jQuery(this).parent(),n=e.attr("id"),o=e.data("uid");jQuery("#"+(n+"-"+o)).remove(),e.remove()}))}init(){const t=this;t.globalControls=new o,t.sidebarInit(),t.createWidget(),t.onSaveChanges(),t.generateStyleSheet(),t.dropWidget(t),t.removeWidget(t),jQuery(document).on("click",".page-settings, .all-widget, .popup-widget-element",(function(e){e.preventDefault(),e.stopPropagation();const n=this.dataset.type;switch(n){case"global-settings":t.createControls.call(t,n);break;case"all-widgets":t.createWidget.call(t,n);break;case"widget":t.createControls.call(t,this.id)}t.sidebarSettings.ps.update(),t.dropWidget(t),t.removeWidget(t)}))}}})();
//# sourceMappingURL=index.js.map