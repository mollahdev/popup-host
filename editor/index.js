(()=>{"use strict";function e(){return Math.floor(1e6*Math.random())}class t{config={};css="";uid=e();constructor(e=!1){const t=this;this.registerControls.apply({addControl:function(n,o){o.selector&&(o.prefix=e?"#popup.element-1 ":`#popup .element-${t.uid} `,o.selector.call(o)&&(t.css+=o.prefix+o.selector.call(o)+"\n\n")),o.isLabelInline=o.isLabelInline||!1,t.config[n]=o}})}static select(e,t){return`<select value="${e.default}" data-key=${t} type="select" class="popup-control--trigger">\n                ${Object.keys(e.options).map((t=>`<option value="${t}">${e.options[t]}</option>`)).join("")}\n            </select>\n            `}static text(e,t){return`<input \n                value="${e.default}" \n                data-key=${t} \n                type="text" \n                class="popup-control--trigger"\n            />`}static color(e,t){return`<input \n                value="${e.default}" \n                data-key=${t} \n                type="color" \n                class="popup-control--trigger"\n            />`}static slider(e,t){return`<div class="slider-control">\n                <input\n                    class="popup-control--trigger"\n                    data-key=${t}\n                    type="range"\n                    min="0"  \n                    max=${e.max}  \n                    step=${e.step} \n                    value=${e.default}               \n                >\n                <span class="value">${e.default}px</span>\n            </div>\n            `}}const n={text_widget:new class extends t{constructor(){return super(),{controls:this.config,css:this.css,uid:this.uid,sheet:"text_widget",icon:"popup-widgets",name:"Text Widget",render:this.render.bind(this.config)}}registerControls(){this.addControl("text_content",{label:"Text Color",type:"text",default:"All the text and elements in this popup should be editable and dragable",selector:function(){const e=jQuery(this.prefix);e.length&&e.find("span").text(this.default)}}),this.addControl("text_alignment",{label:"Text Alignment",type:"select",default:"center",options:{left:"Left",center:"Center",right:"Right"},selector:function(){return`span {\n                    display: inline-block;\n                    text-align: ${this.default};\n                }`}}),this.addControl("text_font_weight",{label:"Text Alignment",type:"select",default:400,options:{400:"Regular",700:"Medium",900:"Bold"},selector:function(){return`span {\n                    font-weight: ${this.default};\n                }`}}),this.addControl("text_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return`span {\n                    color: ${this.default};\n                }`}}),this.addControl("text_font_size",{label:"Text Font Size",type:"slider",default:24,max:100,step:1,selector:function(){return`span {\n                    font-size: ${this.default}px;\n                }`}}),this.addControl("text_line_height",{label:"Text Line Height",type:"slider",default:24,max:100,step:1,selector:function(){return`span {\n                    line-height: ${this.default}px;\n                }`}})}render(e=""){return console.log(this),`\n            <div class="popup-widget-element element-${e}" data-uid="${e}" id="text_widget" data-type="widget">\n                <div>\n                    <span>${this.text_content.default}</span>\n                </div>\n            </div>\n        `}},star_widget:new class extends t{constructor(){return super(),{controls:this.config,css:this.css,uid:e(),sheet:"star_widget",icon:"popup-widgets",name:"Star Widget"}}registerControls(){this.addControl("star_color",{label:"Star Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}},field_widget:new class extends t{constructor(){return super(),{controls:this.config,css:this.css,uid:e(),sheet:"field_widget",icon:"popup-widgets",name:"Field Widget"}}registerControls(){this.addControl("field_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}},button_widget:new class extends t{constructor(){return super(),{controls:this.config,css:this.css,uid:e(),sheet:"button_widget",icon:"popup-widgets",name:"Button Widget"}}registerControls(){this.addControl("field_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}}};class o extends t{constructor(){return super(!0),{controls:this.config,css:this.css,uid:1,sheet:"popup-stylesheet"}}registerControls(){this.addControl("global_popup_bg",{label:"Popup Background Color",type:"color",default:"#e07a5f",isLabelInline:!0,selector:function(){return`.wrapper{\n                    background-color: ${this.default};\n                    box-shadow: 0px 0px 0 var(--border-width) ${this.default};\n                }`}}),this.addControl("global_popup_border_color",{label:"Popup Border Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return`.wrapper{\n                    border-color: ${this.default};\n                    border-style: solid;\n                }`}}),this.addControl("global_popup_border_width",{label:"Popup Border Width",type:"slider",default:5,max:50,step:1,selector:function(){return` .wrapper{\n                    border-width: ${this.default}px;\n                    --border-width: ${this.default}px;\n                }`}}),this.addControl("global_popup_radius",{label:"Popup Radius",type:"slider",default:500,max:500,step:10,selector:function(){return` .wrapper{\n                    border-radius: ${this.default}px\n                }`}}),this.addControl("global_popup_width",{label:"Popup Width",type:"slider",default:400,max:1e3,step:10,selector:function(){return` .wrapper{\n                    width: ${this.default}px\n                }`}}),this.addControl("global_popup_height",{label:"Popup Height",type:"slider",default:400,max:1e3,step:10,selector:function(){return` .wrapper{\n                    height: ${this.default}px\n                }`}})}}new class extends class{sidebarSettings={wheelSpeed:2,wheelPropagation:!0,minScrollbarLength:20};sidebarInit(){const e=new PerfectScrollbar(".customizer__sidebar--content",this.sidebarSettings);this.sidebarSettings.ps=e}createControlMarkup(e,n){const{controls:o}=e,r=Object.keys(o).map((e=>{const n=o[e],r=t[n.type];return r?`\n                <div class="control-item" data-inline="${n.isLabelInline}">\n                    <label> ${n.label} </label>\n                    <div class="control-item--field field-type-${n.type}">\n                        ${r(n,e)}\n                    </div>\n                </div>\n            `:""}));jQuery(".sidebar-container").html(`\n            <div class="control-container">\n                ${r.join("")}\n            </div>\n        `),jQuery(".popup-control--trigger").on("input",(function(t){t.preventDefault(),t.stopPropagation();const r=this.value,l=this.dataset.key;let s="";o[l].default=r,Object.values(o).forEach((e=>{e.selector&&e.selector.call(e)&&(s+=e.prefix+e.selector.call(e)+"\n\n")})),o[l].selector&&jQuery(`#${n}-${e.uid}`).text(s),"range"===this.type&&(this.nextElementSibling.innerText=r+"px")}))}createWidgetMarkup(){const e=Object.keys(n).map((e=>{const t=n[e];return`\n            <div class="popup-element">\n                <div class="popup-widget" draggable="true" data-type="${e}">\n                    <i class="${t.icon}"></i>\n                    <label>${t.name}</label>\n                </div>\n            </div>`}));jQuery(".sidebar-container").html(`\n            <div class="widget-container">\n                ${e.join("")}\n            </div>\n        `)}}{popupWrapper="";constructor(){super(),window.addEventListener("DOMContentLoaded",this.init.bind(this))}createControls(e){const t="global-settings"===e?this.globalControls:n[e];this.createControlMarkup(t,e)}createWidget(){this.createWidgetMarkup()}generateStyleSheet(e="global-settings-1",t=!0,n=""){t?jQuery("head").append(`<style id="${e}">`+this.globalControls.css+"</style>"):jQuery("head").append(`<style id="${e}">`+n+"</style>")}onDropWidget(t){const n=e(),o=t.controls;if(t.uid=n,t.render){const e=t.render(n);let r="";jQuery("#popup form > .wrapper").append(e),jQuery(".popup-widget-element").draggable({containment:"parent"}),Object.values(o).forEach((e=>{e.selector&&(e.prefix=`#popup .element-${n} `,e.selector.call(e)&&(r+=e.prefix+e.selector.call(e)+"\n\n"))})),this.generateStyleSheet(`${t.sheet}-${t.uid}`,!1,r)}}dropWidget(e){jQuery(".popup-widget").draggable({helper:"clone"}),jQuery("#popup form > .wrapper").droppable({accept:".popup-widget",drop:function(t,o){const r=o.draggable.data("type");e.onDropWidget(n[r])}})}init(){const e=this;e.globalControls=new o,e.sidebarInit(),e.createWidget(),e.generateStyleSheet(),e.dropWidget(e),jQuery(document).on("click",".page-settings, .all-widget, .popup-widget-element",(function(t){t.preventDefault(),t.stopPropagation();const n=this.dataset.type;switch(n){case"global-settings":e.createControls.call(e,n);break;case"all-widgets":e.createWidget.call(e,n);break;case"widget":e.createControls.call(e,this.id)}e.sidebarSettings.ps.update(),e.dropWidget(e)}))}}})();
//# sourceMappingURL=index.js.map