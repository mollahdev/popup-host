(()=>{"use strict";class e{config={};css="";constructor(){const e=this;this.registerControls.apply({addControl:function(t,n){n.selector&&(n.prefix="#popup ",e.css+=n.prefix+n.selector.call(n)+"\n\n"),n.isLabelInline=n.isLabelInline||!1,e.config[t]=n}})}uid(){return Math.floor(1e6*Math.random())}static text(e,t){return`<input \n                value="${e.default}" \n                data-key=${t} \n                type="text" \n                class="popup-control--trigger"\n            />`}static color(e,t){return`<input \n                value="${e.default}" \n                data-key=${t} \n                type="color" \n                class="popup-control--trigger"\n            />`}static slider(e,t){return`<div class="slider-control">\n                <input\n                    class="popup-control--trigger"\n                    data-key=${t}\n                    type="range"\n                    min="0"  \n                    max=${e.max}  \n                    step=${e.step} \n                    value=${e.default}               \n                >\n                <span class="value">${e.default}px</span>\n            </div>\n            `}}const t={text_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:this.uid(),sheet:"text_widget",icon:"popup-widgets",name:"Text Widget",render:this.render.bind(this.config)}}registerControls(){this.addControl("text_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}render(){return`\n            <div class="popup-widget-element" id="text_widget" data-type="widget">\n                <div>\n                    <span>${this.text_color.default}</span>\n                </div>\n            </div>\n        `}},star_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:this.uid(),sheet:"star_widget",icon:"popup-widgets",name:"Star Widget"}}registerControls(){this.addControl("star_color",{label:"Star Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}},field_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:this.uid(),sheet:"field_widget",icon:"popup-widgets",name:"Field Widget"}}registerControls(){this.addControl("field_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}},button_widget:new class extends e{constructor(){return super(),{controls:this.config,css:this.css,uid:this.uid(),sheet:"button_widget",icon:"popup-widgets",name:"Button Widget"}}registerControls(){this.addControl("field_color",{label:"Text Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper .text-widget p {\n                    color: ${this.default};\n                }`}})}}};class n extends e{constructor(){return super(),{controls:this.config,css:this.css,sheet:"popup-stylesheet"}}registerControls(){this.addControl("global_popup_bg",{label:"Popup Background Color",type:"color",default:"#e07a5f",isLabelInline:!0,selector:function(){return` .wrapper{\n                    background-color: ${this.default};\n                    box-shadow: 0px 0px 0 var(--border-width) ${this.default};\n                }`}}),this.addControl("global_popup_border_color",{label:"Popup Border Color",type:"color",default:"#ffffff",isLabelInline:!0,selector:function(){return` .wrapper{\n                    border-color: ${this.default};\n                    border-style: solid;\n                }`}}),this.addControl("global_popup_border_width",{label:"Popup Border Width",type:"slider",default:5,max:50,step:1,selector:function(){return` .wrapper{\n                    border-width: ${this.default}px;\n                    --border-width: ${this.default}px;\n                }`}}),this.addControl("global_popup_radius",{label:"Popup Radius",type:"slider",default:500,max:500,step:10,selector:function(){return` .wrapper{\n                    border-radius: ${this.default}px\n                }`}}),this.addControl("global_popup_width",{label:"Popup Width",type:"slider",default:400,max:1e3,step:10,selector:function(){return` .wrapper{\n                    width: ${this.default}px\n                }`}}),this.addControl("global_popup_height",{label:"Popup Height",type:"slider",default:400,max:1e3,step:10,selector:function(){return` .wrapper{\n                    height: ${this.default}px\n                }`}})}}new class extends class{sidebarSettings={wheelSpeed:2,wheelPropagation:!0,minScrollbarLength:20};sidebarInit(){const e=new PerfectScrollbar(".customizer__sidebar--content",this.sidebarSettings);this.sidebarSettings.ps=e}createControlMarkup(t,n){const{controls:r}=t,o=Object.keys(r).map((t=>{const n=r[t],o=e[n.type];return o?`\n                <div class="control-item" data-inline="${n.isLabelInline}">\n                    <label> ${n.label} </label>\n                    <div class="control-item--field field-type-${n.type}">\n                        ${o(n,t)}\n                    </div>\n                </div>\n            `:""}));jQuery(".sidebar-container").html(`\n            <div class="control-container">\n                ${o.join("")}\n            </div>\n        `),jQuery(".sidebar-container").on("input",".popup-control--trigger",(function(){const e=this.value,t=this.dataset.key;let o="";r[t].default=e,Object.values(r).forEach((e=>{e.selector&&(o+=e.prefix+e.selector.call(e)+"\n\n")})),r[t].selector&&jQuery(`#${n}`).text(o),"range"===this.type&&(this.nextElementSibling.innerText=e+"px")}))}createWidgetMarkup(){const e=Object.keys(t).map((e=>{const n=t[e];return`\n            <div class="popup-element">\n                <div class="popup-widget" draggable="true" data-type="${e}">\n                    <i class="${n.icon}"></i>\n                    <label>${n.name}</label>\n                </div>\n            </div>`}));jQuery(".sidebar-container").html(`\n            <div class="widget-container">\n                ${e.join("")}\n            </div>\n        `)}}{popupWrapper="";constructor(){super(),window.addEventListener("DOMContentLoaded",this.init.bind(this))}createControls(e){const n="global-settings"===e?this.globalControls:t[e];this.createControlMarkup(n,e)}createWidget(){this.createWidgetMarkup()}generateStyleSheet(){jQuery("head").append('<style id="global-settings">'+this.globalControls.css+"</style>")}onDropWidget(e){if(e.render){const t=e.render();jQuery("#popup form > .wrapper").append(t),jQuery(".popup-widget-element").draggable({containment:"parent"})}}dropWidget(e){jQuery(".popup-widget").draggable({helper:"clone"}),jQuery("#popup form > .wrapper").droppable({accept:".popup-widget",drop:function(n,r){const o=r.draggable.data("type");e.onDropWidget(t[o])}})}init(){const e=this;e.globalControls=new n,e.sidebarInit(),e.createWidget(),e.generateStyleSheet(),e.dropWidget(e),jQuery(document).on("click",".page-settings, .all-widget, .popup-widget-element",(function(){const t=this.dataset.type;switch(t){case"global-settings":e.createControls.call(e,t);break;case"all-widgets":e.createWidget.call(e,t);break;case"widget":e.createControls.call(e,this.id)}e.sidebarSettings.ps.update(),e.dropWidget(e)}))}}})();
//# sourceMappingURL=index.js.map