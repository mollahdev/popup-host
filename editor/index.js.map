{"version":3,"file":"index.js","mappings":"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","sources":["webpack://popup-host/./src/inc/base.js","webpack://popup-host/./src/inc/state.js","webpack://popup-host/./src/widgets/index.js","webpack://popup-host/./src/widgets/text-widget.js","webpack://popup-host/./src/widgets/star-widget.js","webpack://popup-host/./src/widgets/field-widget.js","webpack://popup-host/./src/widgets/button-widget.js","webpack://popup-host/./src/widgets/close-button-widget.js","webpack://popup-host/./src/inc/cssom.js","webpack://popup-host/./src/inc/global-controls.js","webpack://popup-host/./src/inc/utility.js","webpack://popup-host/./src/customizer.js","webpack://popup-host/./src/inc/sidebar.js"],"sourcesContent":["/**\r\n * \r\n * \r\n * @class ControlBase\r\n * @description ths class is responsible to simplify control creation\r\n * \r\n */ \r\nexport default class ControlBase {\r\n    config = {}\r\n    /**\r\n     * \r\n     * \r\n     * Merge controls\r\n     * \r\n    */\r\n    constructor() {\r\n        const self = this;\r\n\r\n        // collect widget attribute\r\n        if( this.setWidgetAttribute ) {\r\n            self.config.widgetAttribute = this.setWidgetAttribute();\r\n        }\r\n\r\n        // bind controls with render method\r\n        if( this.render ) {\r\n            self.config.widgetAttribute.render = this.render.bind(self.config);\r\n        }\r\n\r\n        // register the controls with widget\r\n        this.registerControls.apply({\r\n            addControl: function( id, props ) {\r\n                props.isLabelInline = props.isLabelInline || false;\r\n                self.config[id] = props;\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * select control \r\n     * \r\n     */ \r\n    static select( props, key ) {\r\n\r\n        return (\r\n            `<select value=\"${props.default}\" data-key=${key} type=\"select\" class=\"popup-control--trigger\">\r\n                ${\r\n                    (()=>{\r\n                        const options = Object.keys(props.options).map( item =>{\r\n                            return `<option ${item == props.default ? 'selected' : ''} value=\"${item}\">${props.options[item]}</option>`\r\n                        })\r\n                        return options.join('');\r\n                    })()\r\n                }\r\n            </select>\r\n            `\r\n        )\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * text control \r\n     * \r\n     */ \r\n    static text( props, key ) {\r\n        return (\r\n            `<input \r\n                value=\"${props.default}\" \r\n                data-key=${key} \r\n                type=\"text\" \r\n                class=\"popup-control--trigger\"\r\n            />`\r\n        )\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * \r\n     * number control \r\n     * \r\n     */ \r\n    static number( props, key ) {\r\n        return (\r\n            `<input \r\n                value=\"${props.default}\" \r\n                data-key=${key} \r\n                type=\"number\" \r\n                class=\"popup-control--trigger\"\r\n            />`\r\n        )\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * color control \r\n     * \r\n     */ \r\n    static color( props, key ) {\r\n        return (\r\n            `<input \r\n                value=\"${props.default}\" \r\n                data-key=${key} \r\n                type=\"color\" \r\n                class=\"popup-control--trigger\"\r\n            />`\r\n        )\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * \r\n     * slider control \r\n     * \r\n     */ \r\n    static slider( props, key ) {\r\n        return (\r\n            `<div class=\"slider-control\">\r\n                <input\r\n                    class=\"popup-control--trigger\"\r\n                    data-key=${key}\r\n                    type=\"range\"\r\n                    min=\"0\"  \r\n                    max=${props.max}  \r\n                    step=${props.step} \r\n                    value=${props.default}               \r\n                >\r\n                <span class=\"value\">${props.default}px</span>\r\n            </div>\r\n            `\r\n        )\r\n    }\r\n}","/**\r\n * \r\n * @file state\r\n * this state object is responsible for managing unique uid and widget settings through out the application \r\n * \r\n */ \r\n\r\n\r\nlet STORAGE = {\r\n    global: {}\r\n};\r\n\r\nconst state = {\r\n    get( target = false ) {\r\n        if( target ) {\r\n            return STORAGE[target]\r\n        } else {\r\n            return STORAGE\r\n        }\r\n    },\r\n    set( value ) {\r\n        STORAGE = value;\r\n    },\r\n    add( property, value ) {\r\n        STORAGE[property] = value;\r\n    }, \r\n    remove( property ) {\r\n        delete STORAGE[property]\r\n    } \r\n}\r\n\r\nexport default state\r\n","import TextWidget from \"./text-widget\";\r\nimport StarWidget from \"./star-widget\";\r\nimport FieldWidget from \"./field-widget\";\r\nimport ButtonWidget from \"./button-widget\";\r\nimport CloseButtonWidget from \"./close-button-widget\";\r\n\r\nconst widgets = {\r\n    text_widget         : new TextWidget(),\r\n    star_widget         : new StarWidget(),\r\n    field_widget        : new FieldWidget(),\r\n    button_widget       : new ButtonWidget(),\r\n    close_button_widget : new CloseButtonWidget(),\r\n}\r\n\r\nexport default widgets;","import ControlBase from \"../inc/base\";\r\nexport default class TextWidget extends ControlBase {\r\n\r\n    constructor() {\r\n        super();\r\n        return this.config;\r\n    }\r\n\r\n    setWidgetAttribute() {\r\n        return {\r\n            id: 'text_widget',\r\n            icon: 'title',\r\n            name: 'Text Widget'\r\n        }\r\n    }\r\n\r\n    registerControls() {\r\n        this.addControl('text_content', {\r\n            label: 'Text Color',\r\n            type: 'text',\r\n            default: 'No credit card required. No Surprises ',\r\n            selector: function( wrapper, value ) {\r\n                const scope = jQuery(wrapper)\r\n                if( scope.length ) {\r\n                    scope.find('span').text(value)\r\n                }\r\n            }\r\n        })\r\n\r\n        this.addControl('text_font_weight', {\r\n            label: 'Font Weight',\r\n            type: 'select',\r\n            default: 400,\r\n            options: {\r\n                400: 'Regular',\r\n                700: 'Medium',\r\n                900: 'Bold'\r\n            },\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    font-weight: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('text_alignment', {\r\n            label: 'Alignment',\r\n            type: 'select',\r\n            default: 'center',\r\n            options: {\r\n                left: 'Left',\r\n                center: 'Center',\r\n                right: 'Right'\r\n            },\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    text-align: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('text_color', {\r\n            label: 'Text Color',\r\n            type: 'color',\r\n            default: '#ffffff',\r\n            isLabelInline: true,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} span {\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('text_font_size', {\r\n            label: 'Text Font Size',\r\n            type: 'slider',\r\n            default: 18,\r\n            max: 100,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    font-size: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        \r\n        this.addControl('text_width', {\r\n            label: 'Width',\r\n            type: 'slider',\r\n            default: 250,\r\n            max: 800,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    width: ${value}px;\r\n                    display: inline-block;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('text_line_height', {\r\n            label: 'Line Height',\r\n            type: 'slider',\r\n            default: 24,\r\n            max: 200,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    line-height: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('zindex', {\r\n            label: 'Z-Index',\r\n            type: 'number',\r\n            default: 1,\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} {\r\n                    z-index: ${value};\r\n                }`\r\n            }\r\n        })\r\n    }\r\n    \r\n    render( wrapper_id ) {\r\n        return `\r\n            <div class=\"popup-widget-element apb-${wrapper_id}\" data-uid=\"${wrapper_id}\" id=\"text_widget\" data-type=\"widget\">\r\n                <i class=\"remove-btn\">x</i>\r\n                <div>\r\n                    <span>${this.text_content.default}</span>\r\n                </div>\r\n            </div>\r\n        `\r\n    }\r\n\r\n}\r\n\r\n","import ControlBase from \"../inc/base\";\r\nexport default class StarWidget extends ControlBase {\r\n\r\n    constructor() {\r\n        super();\r\n        return this.config;\r\n    }\r\n\r\n    setWidgetAttribute() {\r\n        return {\r\n            id: 'star_widget',\r\n            icon: 'star',\r\n            name: 'Star'\r\n        }\r\n    }\r\n\r\n    registerControls() {\r\n        \r\n        this.addControl('star_color', {\r\n            label: 'Star Color',\r\n            type: 'color',\r\n            default: '#c75943',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('star_size', {\r\n            label: 'Star Size',\r\n            type: 'slider',\r\n            default: 44,\r\n            max: 200,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} span {\r\n                    font-size: ${value}px;\r\n                    display: unset;\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('zindex', {\r\n            label: 'Z-Index',\r\n            type: 'number',\r\n            default: 1,\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} {\r\n                    z-index: ${value};\r\n                }`\r\n            }\r\n        })\r\n    }\r\n\r\n    render( wrapper_id ) {\r\n        return `\r\n            <div class=\"popup-widget-element apb-${wrapper_id}\" data-uid=\"${wrapper_id}\" id=\"star_widget\" data-type=\"widget\">\r\n                <i class=\"remove-btn\">x</i>\r\n                <div>\r\n                    <span class=\"material-icons-outlined\">star</span>\r\n                </div>\r\n            </div>\r\n        `\r\n    }\r\n    \r\n\r\n}\r\n\r\n","import ControlBase from \"../inc/base\";\r\nexport default class FieldWidget extends ControlBase {\r\n\r\n    constructor() {\r\n        super();\r\n        return this.config\r\n    }\r\n\r\n    setWidgetAttribute() {\r\n        return {\r\n            id: 'field_widget',\r\n            icon: 'email',\r\n            name: 'Email Input'\r\n        }\r\n    }\r\n\r\n    registerControls() {\r\n        \r\n        this.addControl('input_placeholder', {\r\n            label: 'Placeholder',\r\n            type: 'text',\r\n            default: 'E-mail',\r\n            selector: function( wrapper, value ) {\r\n                const scope = jQuery(wrapper)\r\n                if( scope.length ) {\r\n                    scope.find('input').attr(value)\r\n                }\r\n            }\r\n        })\r\n\r\n        this.addControl('input_font_size', {\r\n            label: 'Font Size',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 100,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    border: 0;\r\n                    font-size: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_width', {\r\n            label: 'Width',\r\n            type: 'slider',\r\n            default: 350,\r\n            max: 500,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    width: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_padding_x', {\r\n            label: 'Padding X',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 200,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    padding-left: ${value}px;\r\n                    padding-right: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_padding_y', {\r\n            label: 'Padding Y',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 200,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    padding-top: ${value}px;\r\n                    padding-bottom: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_radius', {\r\n            label: 'Input Radius',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 200,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    border-radius: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_color', {\r\n            label: 'Input Color',\r\n            type: 'color',\r\n            default: '#B02827',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    display: inline-block;\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_color_hover', {\r\n            label: 'Input Hover Color',\r\n            type: 'color',\r\n            default: '#414142',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input:hover {\r\n                    display: inline-block;\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_bg_color', {\r\n            label: 'Background Color',\r\n            type: 'color',\r\n            default: '#ffffff',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} input {\r\n                    cursor:pointer;\r\n                    background: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('input_bg_color_hover', {\r\n            label: 'Input Background Hover',\r\n            type: 'color',\r\n            default: '#eeeeee',\r\n            isLabelInline: true,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} input:hover {\r\n                    background: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('zindex', {\r\n            label: 'Z-Index',\r\n            type: 'number',\r\n            default: 1,\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} {\r\n                    z-index: ${value};\r\n                }`\r\n            }\r\n        })\r\n    \r\n    }\r\n    \r\n    render( wrapper_id ) {\r\n        return `\r\n            <div class=\"popup-widget-element apb-${wrapper_id}\" data-uid=\"${wrapper_id}\" id=\"field_widget\" data-type=\"widget\">\r\n                <i class=\"remove-btn\">x</i>\r\n                <div>\r\n                    <input class=\"email-field\" type=\"email\" placeholder=\"${this.input_placeholder.default}\"/>\r\n                </div>\r\n            </div>\r\n        `\r\n    }\r\n\r\n}\r\n\r\n","import ControlBase from \"../inc/base\";\r\n\r\nexport default class ButtonWidget extends ControlBase {\r\n\r\n    constructor() {\r\n        super();\r\n        return this.config;\r\n    }\r\n\r\n    setWidgetAttribute() {\r\n        return {\r\n            id: 'button_widget',\r\n            icon: 'smart_button',\r\n            name: 'Submit Button'\r\n        }\r\n    }\r\n\r\n    registerControls() {\r\n        \r\n        this.addControl('button_content', {\r\n            label: 'Button Label',\r\n            type: 'text',\r\n            default: 'SIGNUP NOW',\r\n            selector: function( wrapper, value ) {\r\n                const scope = jQuery(wrapper)\r\n                if( scope.length ) {\r\n                    scope.find('.button').text(value)\r\n                }\r\n            }\r\n        })\r\n\r\n        this.addControl('button_weight', {\r\n            label: 'Font Weight',\r\n            type: 'select',\r\n            default: 700,\r\n            options: {\r\n                400: 'Regular',\r\n                700: 'Medium',\r\n                900: 'Bold'\r\n            },\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button {\r\n                    font-weight: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('button_padding_font_size', {\r\n            label: 'Font Size',\r\n            type: 'slider',\r\n            default: 24,\r\n            max: 100,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button{\r\n                    font-size: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_padding_x', {\r\n            label: 'Padding X',\r\n            type: 'slider',\r\n            default: 97,\r\n            max: 200,\r\n            step:1,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button{\r\n                    padding-left: ${value}px;\r\n                    padding-right: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_padding_y', {\r\n            label: 'Padding Y',\r\n            type: 'slider',\r\n            default: 15,\r\n            max: 200,\r\n            step:1,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button{\r\n                    padding-top: ${value}px;\r\n                    padding-bottom: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_radius', {\r\n            label: 'Border Radius',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 200,\r\n            step:1,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button{\r\n                    border-radius: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_color', {\r\n            label: 'Button Color',\r\n            type: 'color',\r\n            default: '#ffffff',\r\n            isLabelInline: true,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button {\r\n                    display: inline-block;\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_color_hover', {\r\n            label: 'Button Hover Color',\r\n            type: 'color',\r\n            default: '#414142',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button:hover {\r\n                    display: inline-block;\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_bg_color', {\r\n            label: 'Background Color',\r\n            type: 'color',\r\n            default: '#414142',\r\n            isLabelInline: true,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button {\r\n                    background: ${value};\r\n                    user-select: none;\r\n                    cursor: pointer;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_bg_color_hover', {\r\n            label: 'Background Hover Color',\r\n            type: 'color',\r\n            default: '#ffffff',\r\n            isLabelInline: true,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button:hover {\r\n                    background: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('zindex', {\r\n            label: 'Z-Index',\r\n            type: 'number',\r\n            default: 1,\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} {\r\n                    z-index: ${value};\r\n                }`\r\n            }\r\n        })\r\n    }\r\n\r\n    render( wrapper_id ) {\r\n        return `\r\n            <div class=\"popup-widget-element apb-${wrapper_id}\" data-uid=\"${wrapper_id}\" id=\"button_widget\" data-type=\"widget\">\r\n                <i class=\"remove-btn\">x</i>\r\n                <div>\r\n                    <span class=\"button submit-btn\">${this.button_content.default}</span>\r\n                </div>\r\n            </div>\r\n        `\r\n    }\r\n    \r\n}\r\n\r\n","import ControlBase from \"../inc/base\";\r\nexport default class CloseButtonWidget extends ControlBase {\r\n\r\n    constructor() {\r\n        super();\r\n        return this.config\r\n    }\r\n\r\n    setWidgetAttribute() {\r\n        return {\r\n            id: 'close_button_widget',\r\n            icon: 'disabled_by_default',\r\n            name: 'Close Button'\r\n        }\r\n    }\r\n\r\n    registerControls() {\r\n        \r\n        this.addControl('button_content', {\r\n            label: 'Button Label',\r\n            type: 'text',\r\n            default: 'Remove',\r\n            selector: function( wrapper, value ) {\r\n                const scope = jQuery(wrapper)\r\n                if( scope.length ) {\r\n                    scope.find('.button').text(value)\r\n                }\r\n            }\r\n        })\r\n\r\n        this.addControl('button_padding_font_size', {\r\n            label: 'Font Size',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 100,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button {\r\n                    font-size: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_padding_x', {\r\n            label: 'Padding X',\r\n            type: 'slider',\r\n            default: 20,\r\n            max: 200,\r\n            step:1,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button {\r\n                    padding-left: ${value}px;\r\n                    padding-right: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_padding_y', {\r\n            label: 'Padding Y',\r\n            type: 'slider',\r\n            default: 10,\r\n            max: 200,\r\n            step:1,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button{\r\n                    padding-top: ${value}px;\r\n                    padding-bottom: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_radius', {\r\n            label: 'Border Radius',\r\n            type: 'slider',\r\n            default: 35,\r\n            max: 200,\r\n            step:1,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .button{\r\n                    border-radius: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_color', {\r\n            label: 'Button Color',\r\n            type: 'color',\r\n            default: '#B02827',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button {\r\n                    display: inline-block;\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_color_hover', {\r\n            label: 'Button Hover Color',\r\n            type: 'color',\r\n            default: '#414142',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button:hover {\r\n                    display: inline-block;\r\n                    color: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_bg_color', {\r\n            label: 'Background Color',\r\n            type: 'color',\r\n            default: '#ffffff',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button {\r\n                    cursor:pointer;\r\n                    background: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('button_bg_color_hover', {\r\n            label: 'Background Hover Color',\r\n            type: 'color',\r\n            default: '#B02827',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .button:hover {\r\n                    background: ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('zindex', {\r\n            label: 'Z-Index',\r\n            type: 'number',\r\n            default: 1,\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} {\r\n                    z-index: ${value};\r\n                }`\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    render(wrapper_id) {\r\n        return `\r\n            <div class=\"popup-widget-element apb-${wrapper_id}\" data-uid=\"${wrapper_id}\" id=\"close_button_widget\" data-type=\"widget\">\r\n                <i class=\"remove-btn\">x</i>\r\n                <div>\r\n                    <span class=\"button popup-close-button\">${this.button_content.default}</span>\r\n                </div>\r\n            </div>\r\n        `\r\n    }\r\n    \r\n\r\n}\r\n\r\n","/**\r\n * \r\n * \r\n * @author Ashraf\r\n * @version 1.0.0\r\n * @last_update 15th January 2021\r\n * @email mollah.dev@gmail.com\r\n * @class StylesheetManager\r\n * @description this class is responsible for managing stylesheet. \r\n * It helps to keep unique selector and style by merging them together \r\n */ \r\n\r\n class StylesheetManager {\r\n    \r\n    rule = {};\r\n    constructor( id ) {\r\n        this.styleSheetId = id;\r\n        this.fetchStylesheet();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * get seperate selector and style \r\n     * \r\n     */ \r\n    seperateStyle( initialStyle ) {\r\n        const selector = initialStyle.split('{')[0].trim().replace(/\\s{2,}/g, ' ');\r\n        const style = initialStyle.split('{')[1].trim().replace(/[&\\/\\\\,$~.?<>{}]/g, '').replace(/\\s{2,}/g, ' ');\r\n\r\n        return {\r\n            selector, style\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * collect all the css and return as string\r\n     * \r\n     */ \r\n    getCSS() {\r\n        const promise = new Promise((resolve, reject) => {\r\n            let css = '';\r\n            for( let selector in this.rule ) {\r\n                const style = this.rule[selector].style;\r\n                css += `${selector} {${style}}`;\r\n            }\r\n\r\n            document.getElementById(this.styleSheetId).innerText = css;\r\n            this.rule = {};\r\n            this.fetchStylesheet();\r\n            resolve(css)\r\n        })\r\n        return promise;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param selectors this arguments contains multiple selector\r\n     * \r\n     */ \r\n    delete( selectors ) {\r\n        for( let selector of selectors ) {\r\n            selector = selector.trim();\r\n            delete this.rule[selector]\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * \r\n     * inert rules into the cssom\r\n     * if the selector already created, put the new new style into the existing rule otherwise create a new rule\r\n     * @param selector dom selector\r\n     * @param newStyle css properties and values\r\n     * \r\n     */\r\n\r\n    insert( selector, newStyle ) {\r\n        selector = selector.trim();\r\n\r\n        // check is the selector exists\r\n        if( this.rule[selector] ) {\r\n            const index = this.rule[selector].index;\r\n            const style = this.sheet.rules.item(index).style;\r\n\r\n            newStyle.split(';').map( item => {\r\n                let property = item.split(':')[0]\r\n                let value = item.split(':')[1]\r\n                if( property && value ) {\r\n                    \r\n                    const isImportant = value.includes('important') ? 'important' : '';\r\n                    if( isImportant === 'important' ) {\r\n                        value = value.split('!')[0];\r\n                    } \r\n                    \r\n                    style.setProperty(property.trim(), value.trim(), isImportant );\r\n                    this.rule[selector].style = style.cssText;\r\n                }\r\n            })\r\n\r\n        } else {\r\n            this.rule[selector] = {\r\n                index: this.length, \r\n                style: newStyle\r\n            }\r\n            this.sheet.insertRule(`${selector} {${newStyle}}`, this.length);\r\n            this.length = this.sheet.rules.length\r\n        }\r\n    } \r\n    /*\r\n     * \r\n     * \r\n     * Get css declaration\r\n     */ \r\n    cssDeclaration( str, selector ) {\r\n        const declaration = str.split(selector).pop().replace(/[&\\/\\\\,$~.?<>{}]/g, '')\r\n        return declaration.trim()\r\n    }\r\n    /**\r\n     * \r\n     * \r\n     * this method will run when stylesheet load first time\r\n     * \r\n     */ \r\n    mergeRule( sheet, selector, i ) {\r\n        const prevStyle = this.rule[selector].style;\r\n        const nextRule  = sheet.rules.item(i);\r\n        let nextStyle   = this.cssDeclaration( nextRule.cssText, selector );\r\n        this.rule[selector].style = nextStyle + prevStyle\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * Get stylesheet from DOM\r\n     * \r\n     */ \r\n    fetchStylesheet() {\r\n\r\n        const sheet = document.getElementById(this.styleSheetId).sheet;\r\n        const rules = sheet.rules;\r\n        const keys  = Object.keys(rules).reverse();\r\n\r\n        for( let i of keys ) {\r\n            const rule = rules[i];\r\n            if( typeof rule === 'object' ) {\r\n                const selector = rule.selectorText\r\n                if( Reflect.has(this.rule, selector) ) {\r\n                    this.rule[selector].index = i;\r\n                    this.mergeRule( sheet, selector, i );\r\n                    sheet.deleteRule(i)\r\n                } \r\n                else {\r\n                    this.rule[selector] = {\r\n                        index : i,\r\n                        style : this.cssDeclaration(rule.cssText, selector)\r\n                    };\r\n                }  \r\n            }\r\n        }\r\n\r\n        // insert the merged css into the stylesheet\r\n        // Note : this code will execute when stylesheet load first time\r\n\r\n        let i = 0;\r\n        for( let selector in this.rule ) {\r\n            this.rule[selector].index = i;\r\n            const style = this.rule[selector].style;\r\n            sheet.deleteRule(i);\r\n            sheet.insertRule(`${selector} {${style}}`, i);\r\n            i++;\r\n        }\r\n        \r\n        // assigned the filtered and merged css rules into the class\r\n        this.sheet = sheet;\r\n        this.length= sheet.rules.length;\r\n    }\r\n}\r\n\r\n\r\nconst cssom = new StylesheetManager('builder-css');\r\nexport default cssom;","import ControlBase from \"./base\";\r\nexport default class GlobalControls extends ControlBase {\r\n\r\n    constructor() {\r\n        super();\r\n        return this.config;\r\n    }\r\n\r\n    setWidgetAttribute() {\r\n        return {\r\n            id: 'global',\r\n            icon: 'title',\r\n            name: 'Popup Settings'\r\n        }\r\n    }\r\n\r\n    registerControls() {\r\n        \r\n        this.addControl('global_popup_bg', {\r\n            label: 'Popup Background Color',\r\n            type: 'color',\r\n            default: '#e07a5f',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .apb-wrapper {\r\n                    background-color: ${value};\r\n                    box-shadow:0 0 0 var(--border-width) ${value};\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('global_popup_border_color', {\r\n            label: 'Popup Border Color',\r\n            type: 'color',\r\n            default: '#eeeeee',\r\n            isLabelInline: true,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .apb-wrapper {\r\n                    border-color: ${value};\r\n                    border-style: solid;\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('global_popup_border_width', {\r\n            label: 'Popup Border Width',\r\n            type: 'slider',\r\n            default: 5,\r\n            max: 50,\r\n            step:1,\r\n            selector: function( wrapper, value ) {\r\n                jQuery(`${wrapper} .apb-wrapper`).css({'--border-width': (value * 2) + 'px'});\r\n                return `${wrapper} .apb-wrapper {\r\n                    border-width: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n\r\n        this.addControl('global_popup_radius', {\r\n            label: 'Popup Radius',\r\n            type: 'slider',\r\n            default: 500,\r\n            max: 500,\r\n            step:10,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .apb-wrapper {\r\n                    position: relative;\r\n                    border-radius: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n\r\n        this.addControl('global_popup_width', {\r\n            label: 'Popup Width',\r\n            type: 'slider',\r\n            default: 600,\r\n            max: 1000,\r\n            step:10,\r\n            selector: function( wrapper, value ) {\r\n                return `${wrapper} .apb-wrapper{\r\n                    width: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n        \r\n        this.addControl('global_popup_height', {\r\n            label: 'Popup Height',\r\n            type: 'slider',\r\n            default: 600,\r\n            max: 1000,\r\n            step:10,\r\n            selector: function(wrapper, value) {\r\n                return `${wrapper} .apb-wrapper{\r\n                    height: ${value}px;\r\n                }`\r\n            }\r\n        })\r\n    \r\n\r\n    }\r\n    \r\n\r\n}\r\n\r\n","import state from './state';\r\nimport cssom from './cssom';\r\n\r\nexport default class Utility {\r\n    /**\r\n     * \r\n     * \r\n     * this uid method is responsible for creating unique number for the widget wrapper \r\n     * \r\n     */ \r\n    static uid() {\r\n        let store = state.get();\r\n        const promise = new Promise((resolve, reject) => {\r\n            function generateUID() {\r\n                let uid = Math.floor((Math.random() * 10000) + 1);\r\n                // check weather the number already used\r\n                if( Reflect.has( store, uid ) ) {\r\n                    generateUID();\r\n                } else {\r\n                    resolve(uid)\r\n                }\r\n            }\r\n            generateUID()\r\n        })\r\n        return promise;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * this method is responsible for finding controls of a widget\r\n     * @param widget refers to the widget \r\n     * @param uid refers to the unique id / widget wrapper\r\n     */ \r\n    static applyControl( widget, uid ) {\r\n        const data = state.get(uid)\r\n         Object.entries( widget ).map(([prop, attr]) => {\r\n            if( prop !== 'widgetAttribute' && attr.selector ) {\r\n\r\n                if( !Reflect.has( data, prop ) ) {\r\n                    data[prop] =  attr.default;\r\n                }\r\n\r\n                const initialStyle = attr.selector( '.apb-' + uid, data[prop] );\r\n                if( initialStyle ) {\r\n                    const { selector, style } = cssom.seperateStyle( initialStyle );\r\n                    cssom.insert(selector, style)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * \r\n     * on remove widget \r\n     * @param widget refers to the widget \r\n     * @param uid refers to the unique id / widget wrapper\r\n     */ \r\n\r\n    static removeControl( widget, uid ) {\r\n        const selector = new Set();\r\n        state.remove( uid )\r\n        Object.entries( widget ).map(([prop, attr]) => {\r\n            if( prop !== 'widgetAttribute' && attr.selector ) {\r\n                const initialStyle = attr.selector( '.apb-' + uid, '' );\r\n                if( initialStyle ) {\r\n                    selector.add( cssom.seperateStyle( initialStyle ).selector );\r\n                }\r\n            }\r\n        })\r\n\r\n        cssom.delete( Array.from(selector) );\r\n    }\r\n\r\n}","import Sidebar from \"./inc/sidebar\";\r\nimport GlobalControls from \"./inc/global-controls\";\r\nimport widgets from \"./widgets\";\r\nimport state from \"./inc/state\";\r\nimport cssom from \"./inc/cssom\";\r\nimport Utility from \"./inc/utility\";\r\n\r\n\r\nclass Customizer extends Sidebar {\r\n\r\n    constructor() {\r\n        super()\r\n        window.addEventListener('DOMContentLoaded', this.loadSavedMarkup.bind(this) );\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * Create controls for sidebar\r\n     * @var GlobalControls returns the global controls settings\r\n     * @param type refers to the settings type = popup settings or widget settings\r\n     * @param uid refers to the widget wrapper id\r\n     * \r\n     */ \r\n    createControls(type, uid) {\r\n        if( type === 'popup-settings' ) {\r\n            this.createControlMarkup( this.globalControls, 'global' )\r\n        } else {\r\n            const widgetName = widgets[type].widgetAttribute.name;\r\n            jQuery('.panel--info').text( widgetName );\r\n            this.createControlMarkup( widgets[type], uid )\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * Create Widgets Markup for sidebar \r\n     * \r\n     */ \r\n    createWidget() {\r\n        this.createWidgetMarkup()\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * On saving content \r\n     * \r\n     */ \r\n    onSaveChanges() {\r\n\r\n        const btn = jQuery('.save-changes-btn');\r\n        btn.on( 'click', function() {\r\n            btn.addClass('is-loading');\r\n            const markup  = jQuery('.alpha-popup-builder').parent().html();\r\n            cssom.getCSS().then( css => {\r\n                jQuery.ajax({\r\n                    type: \"POST\",\r\n                    data: {\r\n                        action: 'save',\r\n                        css: JSON.stringify( css ),\r\n                        html: JSON.stringify( markup ),\r\n                        storage: JSON.stringify( state.get() )\r\n                    },\r\n                    url: 'http://localhost/popup-host/' + 'storage/index.php',\r\n                    success: function(){\r\n                        setTimeout(()=>{\r\n                            btn.removeClass('is-loading');\r\n                        },1000)\r\n                    }\r\n                });\r\n            })\r\n        })\r\n    }\r\n\r\n    onDropWidget( widget, position ) {\r\n        Utility.uid().then( wrapperId => {\r\n            \r\n            const { name, id, render } = widget.widgetAttribute;\r\n            state.add(wrapperId, {})\r\n\r\n            // generate markup \r\n            if( typeof render === 'function' ) {\r\n                const markup = render( wrapperId );\r\n                jQuery('.alpha-popup-builder .apb-wrapper').append(markup)\r\n                jQuery('.apb-' + wrapperId).css(position)\r\n                jQuery('.popup-widget-element').draggable({ containment: 'parent' })\r\n                jQuery('.panel--info').text(name);                \r\n                Utility.applyControl( widget, wrapperId  ) // generate style from default values\r\n\r\n            }\r\n        }) // end of promise\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * \r\n     * Drop widget \r\n     * \r\n     */ \r\n    dropWidget( self ) {\r\n        //make widget panel element dragable\r\n        jQuery('.popup-widget').draggable({\r\n            helper: 'clone'\r\n        })\r\n\r\n        // make preview panel widget draggable\r\n        const container = jQuery(document).find(\".alpha-popup-builder\");\r\n        container.droppable({\r\n            accept: '.popup-widget', \r\n            drop: function( event, ui ) {\r\n                const parent    = jQuery(this).position();\r\n                const type      = ui.draggable.data('type');\r\n                const position  = {\r\n                    left: ui.position.left - parent.left,\r\n                    top: ui.position.top - parent.top,\r\n                }\r\n\r\n                self.onDropWidget( widgets[type], position );\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * Remove Widget \r\n     * \r\n     */ \r\n    removeWidget( ) {\r\n        jQuery(document).on('click', '.remove-btn', function(ev){\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            const element   = jQuery(this).parent();\r\n            const uid       = element.data('uid')\r\n            const widgetId  = element.attr('id');\r\n            const widget    = widgets[widgetId]\r\n            Utility.removeControl(widget, uid)\r\n            element.remove();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * Load Saved markup \r\n     * \r\n     */ \r\n    loadSavedMarkup() {\r\n\r\n        const self = this;\r\n        fetch( 'http://localhost/popup-host/' + 'storage/index.php?all')\r\n        .then( response => response.json())\r\n        .then( response => {\r\n            \r\n            const { html, storage } = response.body;\r\n\r\n            if( storage ) {\r\n                state.set( JSON.parse( storage ) )\r\n            }\r\n\r\n            if( html ) {\r\n                // load the markup into the dom\r\n                jQuery('.alpha-popup-builder').parent().html(JSON.parse(html));\r\n                // restore saved css \r\n                jQuery('.popup-widget-element').each( (i, item) =>{\r\n                    const wrapperId     = item.dataset.uid;\r\n                    const widgetConfig  = widgets[item.id]\r\n                    Utility.applyControl( widgetConfig, wrapperId )\r\n                })\r\n                // enable drag and drop \r\n                self.dropWidget( self );\r\n                jQuery('.popup-widget-element').draggable({ containment: 'parent' })\r\n            }\r\n\r\n            /**\r\n             * \r\n             * After loading the entire saved markup and style load the drag and drop functionility\r\n             * \r\n             */ \r\n            self.init.call( self );\r\n            \r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * \r\n     * Initalize customizer script\r\n     * \r\n     */ \r\n    init() {\r\n\r\n        const self = this;\r\n        self.globalControls = new GlobalControls();\r\n        self.sidebarInit();\r\n        self.createControls('popup-settings');\r\n        self.createWidget();\r\n        self.onSaveChanges();\r\n        self.dropWidget( self );\r\n        self.removeWidget( self );\r\n\r\n        // change sidebar markup based on what settings user want \r\n        jQuery(document).on('click', '.aside-btn, .popup-widget-element', function(ev) {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            \r\n            const type = this.dataset.type;\r\n            // toggle the active class\r\n            if( ['popup-settings', 'widget-settings'].includes(type) ) {\r\n                jQuery('.aside-btn').removeClass('active');\r\n                this.classList.add('active');\r\n            }\r\n\r\n            switch( type ) {\r\n                case 'popup-settings': // when popup settings button clicked\r\n                self.createControls.call(self, type);\r\n                jQuery('.panel--info').text('Popup Settings');\r\n                break;\r\n                \r\n                case 'widget-settings': // when all widgets button clicked\r\n                jQuery('.panel--info').text('Widgets List');\r\n                self.createWidget.call(self, type);\r\n                break;\r\n                \r\n                case 'widget': // when individual widget is clicked\r\n                jQuery('.aside-btn').removeClass('active');\r\n                self.createControls.call(self, this.id, this.dataset.uid);\r\n                break;\r\n            }\r\n\r\n            // update scrollbar \r\n            self.sidebarSettings.ps.update()\r\n            self.dropWidget( self );\r\n            self.removeWidget( self );\r\n\r\n        })\r\n    }\r\n\r\n}\r\n\r\nnew Customizer();","import ControlBase from \"./base\";\r\nimport state from \"./state\";\r\nimport widgets from \"../widgets\";\r\nimport cssom from './cssom';\r\n\r\nexport default class Sidebar {\r\n    \r\n    sidebarSettings = {\r\n        wheelSpeed: 2,\r\n        wheelPropagation: true,\r\n        minScrollbarLength: 20\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * \r\n     * attach perfect scrollbar plugin into sidebar \r\n     */ \r\n    sidebarInit() {\r\n        const ps  = new PerfectScrollbar('.aside__container', this.sidebarSettings );\r\n        this.sidebarSettings.ps = ps;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * Create markup for controls \r\n     * @param config refers to the controls of the widget\r\n     * @param uid refers to unique key. This unique get is generated when any widget is droped\r\n     * \r\n     */ \r\n    createControlMarkup( config, uid ) {\r\n\r\n        const storage = state.get();\r\n        const data = storage[uid];\r\n        const wrapper = '.apb-' + uid;\r\n\r\n        // generate control markup\r\n        const componentMarkup = Object.keys(config).map( key => {\r\n            const attr = config[key];\r\n            const component = ControlBase[attr.type]\r\n            let value = '';\r\n            \r\n            if( !component ) {\r\n                return '';\r\n            }\r\n\r\n\r\n            // use already saved values\r\n            if( !Reflect.has( data, key ) ) {\r\n                data[key] = attr.default;\r\n                value = data[key];\r\n            } else {\r\n                value = data[key];\r\n            }\r\n\r\n            // generate css\r\n            const initialStyle = attr.selector( wrapper, value );\r\n            if( initialStyle ) {\r\n                const { selector, style } = cssom.seperateStyle( initialStyle );\r\n                cssom.insert(selector, style)\r\n            }\r\n\r\n            return `\r\n                <div class=\"control-item\" data-inline=\"${attr.isLabelInline}\">\r\n                    <label> ${ attr.label } </label>\r\n                    <div class=\"control-item--field field-type-${attr.type}\">\r\n                        ${component({...attr, default: value}, key)}\r\n                    </div>\r\n                </div>\r\n            `\r\n        })\r\n\r\n        // render the markup into the sidebar\r\n        jQuery('.aside__container').html( `\r\n            <div class=\"control-container\">\r\n                ${componentMarkup.join('')}\r\n            </div>\r\n        ` );\r\n\r\n        /**\r\n         * \r\n         * \r\n         * on input change\r\n         * This event is responsible to chapter the changes of any control input changes \r\n         * \r\n         */ \r\n        jQuery('.popup-control--trigger').on('input', function(ev) {\r\n            \r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n\r\n            const value = this.value;\r\n            const key   = this.dataset.key\r\n\r\n            data[key] = value;\r\n            const createStyle = config[key].selector( wrapper, data[key] );\r\n\r\n            if( createStyle ) {\r\n                const { selector, style } = cssom.seperateStyle( createStyle );\r\n                cssom.insert(selector, style)\r\n            }\r\n\r\n            //update range slider value\r\n            if( this.type === 'range' ) {\r\n                this.nextElementSibling.innerText = value + 'px'\r\n            }\r\n\r\n        })\r\n        \r\n    }\r\n\r\n    /**\r\n     * \r\n     * Create widget markup \r\n     * \r\n     */ \r\n    createWidgetMarkup( ) {\r\n\r\n        const componentMarkup = Object.keys( widgets ).map( key => {\r\n            const { widgetAttribute } = widgets[key];\r\n            return `\r\n            <div class=\"popup-element\" id=\"${widgetAttribute.id}\">\r\n                <div class=\"popup-widget\" draggable=\"true\" data-type=\"${key}\">\r\n                    <span class=\"material-icons-outlined\">${widgetAttribute.icon}</span>\r\n                    <label>${widgetAttribute.name}</label>\r\n                </div>\r\n            </div>`\r\n        })\r\n\r\n        // render the markup into the sidebar\r\n        jQuery('.aside__container').html( `\r\n            <div class=\"widget-container\">\r\n                ${componentMarkup.join('')}\r\n            </div>\r\n        ` );\r\n    }\r\n\r\n\r\n}"],"names":["ControlBase","config","constructor","self","this","setWidgetAttribute","widgetAttribute","render","bind","registerControls","apply","addControl","id","props","isLabelInline","key","default","Object","keys","options","map","item","join","max","step","STORAGE","global","get","target","set","value","add","property","remove","text_widget","super","icon","name","label","type","selector","wrapper","scope","jQuery","length","find","text","left","center","right","wrapper_id","text_content","star_widget","field_widget","attr","input_placeholder","button_widget","button_content","close_button_widget","rule","styleSheetId","fetchStylesheet","seperateStyle","initialStyle","split","trim","replace","style","getCSS","Promise","resolve","reject","css","document","getElementById","innerText","delete","selectors","insert","newStyle","index","sheet","rules","isImportant","includes","setProperty","cssText","insertRule","cssDeclaration","str","pop","mergeRule","i","prevStyle","nextRule","nextStyle","reverse","selectorText","Reflect","has","deleteRule","GlobalControls","Utility","store","generateUID","uid","Math","floor","random","widget","data","entries","prop","Set","Array","from","sidebarSettings","wheelSpeed","wheelPropagation","minScrollbarLength","sidebarInit","ps","PerfectScrollbar","createControlMarkup","componentMarkup","component","html","on","ev","preventDefault","stopPropagation","dataset","createStyle","nextElementSibling","createWidgetMarkup","window","addEventListener","loadSavedMarkup","createControls","globalControls","widgetName","createWidget","onSaveChanges","btn","addClass","markup","parent","then","ajax","action","JSON","stringify","storage","url","success","setTimeout","removeClass","onDropWidget","position","wrapperId","append","draggable","containment","applyControl","dropWidget","helper","droppable","accept","drop","event","ui","top","removeWidget","element","widgetId","removeControl","fetch","response","json","body","parse","each","widgetConfig","init","call","classList","update"],"sourceRoot":""}